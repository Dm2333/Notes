#初识

##黑客和骇客

1. 黑客英文为hacker，原意为开创、开辟之意  

    黑客起源于20世纪70年代的麻省理工实验室，源于一种共享的网络精神  
    指的是一类精通计算机科学，以工作为生活的乐趣，以科学成就评定自身价值，解决问题，建立事务，相信自由及共享主义的人群
1. 骇客英文为cracker，解密、破译之意
    一般称那些非法侵入他人网站，通过网站偷看他人电脑信息，篡改他人网站或硬盘内容的捣乱者



#Jianmeng.Jimmy@gmail.com @安全那些事 李建蒙老师*网络安全*讲座
    P->Internet Browser->Firewall->Firewall->Server
    其中用户Firewall与服务器Firewall之间为DMZ

##*Web服务入口*:
* HTTP 80
* HTTPS 443
* URL RFC 3986

##传统Get Method:
* 缓存
* URL泄漏信息

##登录界面:
* 模糊出错信息(防止字典攻击)
* CAPTUS

##忘记密码
* Hash
* Salt
* 邮箱手机绑定问题

##登录跳转
* 钓鱼(通过修改跳转页面)
    * 使用相对地址
    * 限制Redirect域名

##SQL注入
* 泄漏数据库信息
* 秘密信息数据
* 存储过程

##HPP:Http Parameter Pollution
* 绕过输入验证
* 绕过WAF
* 修改应用程序行为

> HPP与SQL注入:

> * 绕过关于SQL注入的验证
>   `select * from tab where page=1&page=2 ...`

##CSRF
利用Cookie(本机)发送请求,欺骗用户
预防:

* CSRF Token
* Random,取Random值使得URL无法伪造

##认证授权
* 水平越权
* 垂直越权
* 缺乏授权认证

##文件上传下载
* 通过修改上传变量为../../..访问服务器目录
* 与服务器Bug结合
* URL编码
* `~`跳转根目录

原因:

1. 路径权限
1. 文件名检验
1. 文件大小
1. 文件类型

解决:

1. 白名单/黑名单(黑名单优于白名单)
1. 禁止上传目录执行脚本
1. 不再URL显示绝对路径
1. 显示与存储分离
1. 使用正确的函数
1. 绝对Path+Para
1. ID代替文件名
1. 检查对File访问权限
1. 限制访问File

##服务器配置
服务器软件默认配置用户名及口令

##资料
1. [CWE TOP25](http://cwe.mitre.org/top25)
1. [OWASP TOP10](owasp.org)

#具体手段

##服务器漏洞


#系统命令

##Ping命令

###Ping作用
> ping程序来计算间隔时间，并计算有多少个包被送达。用户就可以判断网络大致的情况。
> ping还给我们一个看主机到目的主机的路由的机会。这是因为，ICMP的ping请求数据报在每经过一个路由器的时候，路由器都会把自己的ip放到该数据报中。而目的主机则会把这个ip列表复制到回应icmp数据包中发回给主机。

###Ping原理
> ping 使用的是ICMP协议，它发送icmp回送请求消息给目的主机。ICMP协议规定：目的主机必须返回ICMP回送应答消息给源主机。如果源主机在一定时间内收到应答，则认为主机可达。

> ICMP协议通过IP协议发送的，IP协议是一种无连接的，不可靠的数据包协议。在Unix/Linux，序列号从0开始计数，依次递增。而Windows　ping程序的ICMP序列号是没有规律。

工作过程
> 用类型码为0的ICMP发请 求，受到请求的主机则用类型码为8的ICMP回应

1. 构建一个固定格式的ICMP请求数据包,然后交给IP协议
1. IP协议以本机地址作为源地址,构建数据包,在映射表(ARP协议实现)中查找出目的IP地址对应物理地址--MAC地址
1. 数据链路层构建一个帧,源地址为本机物理地址,目的地址为上一步得到目的地址,根据以太网介质访问规则传送出去
1. 收到数据帧后,检查目的地址,将IP包从帧中提取交给本机IP协议,有用信息交给ICMP协议
1. 本机ICMP协议处理后返回一个ICMP应答包,发送回去

##Tracert命令

###Tracert作用
> Tracert（跟踪路由）是路由跟踪实用程序，用于确定 IP 数据报访问目标所采取的路径。Tracert 命令用 IP 生存时间 (TTL) 字段和 ICMP 错误消息来确定从一个主机到网络上其他主机的路由。

###Tracert原理
> 通过向目标发送不同 IP 生存时间 (TTL) 值的“Internet 控制消息协议 (ICMP)”回应数据包(不管Windows还是Linux都是基于UDP)，Tracert 诊断程序确定到目标所采取的路由。
> 要求路径上的每个路由器在转发数据包之前至少将数据包上的 TTL 递减 1。数据包上的 TTL 减为 0 时，路由器应该将“ICMP 已超时”的消息发回源系统。 
> Tracert 先发送 TTL 为 1 的回应数据包，并在随后的每次发送过程将 TTL 递增 1，直到目标响应或 TTL 达到最大值，从而确定路由。

三个时间数据是三次报文的往返时间,即每个路由中转都要发送三次报文

注意:  
某些路由器不经询问直接丢弃 TTL 过期的数据包，这在 Tracert 实用程序中看不到。







































书评
http://www.ccil.org/~esr/faqs/hacker-howto.html
精通黑客编程完整版
黑客成长日记

